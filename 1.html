<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>URL 转 HTML 生成器</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    textarea { width: 100%; height: 200px; margin-bottom: 10px; font-size: 14px; }
    button { padding: 10px 15px; margin-right: 10px; cursor: pointer; }
    #output { width: 100%; height: 250px; margin-top: 10px; font-size: 14px; }
    .section { margin-top: 40px; padding-top: 20px; border-top: 2px solid #eee; }
    input[type="text"] { padding: 8px; width: 280px; margin: 8px 0; }
    input[type="number"] { padding: 8px; width: 80px; }
    label { display: inline-block; min-width: 110px; margin: 8px 0; }
</style>
</head>
<body>

<h2>URL 转 HTML 代码生成器</h2>
<p>在下面输入每行一个链接：</p>
<textarea id="inputUrls" placeholder="在这里粘贴URL，每行一个"></textarea>
<br>
<button onclick="generateHTML()">生成代码</button>
<button onclick="copyResult()">复制结果</button>
<button onclick="clearAll()">清空全部</button>
<textarea id="output" placeholder="生成的HTML代码会显示在这里（每项一行，无空格）"></textarea>

<!-- ── 新功能区 ── -->
<div class="section">
<h2>批量生成图片链接（r2.setutime.com）</h2>
<p>固定域名：https://r2.setutime.com</p>

<div>
    <label>文件夹前缀（如 zrsetu）：</label>
    <input type="text" id="prefix" placeholder="zrsetu" value="zrsetu">
</div>

<div>
    <label>子目录/编号（如 3）：</label>
    <input type="text" id="number" placeholder="3" value="3">
</div>

<div>
    <label>图片文件名基础（如 pic）：</label>
    <input type="text" id="baseName" placeholder="pic" value="pic">
</div>

<div>
    <label>后缀（如 webp）：</label>
    <input type="text" id="suffix" placeholder="webp" value="webp">
</div>

<div>
    <label>生成数量：</label>
    <input type="number" id="count" value="80" min="1" max="9999">
    <span style="margin-left:10px;">（最多生成9999个）</span>
</div>

<div style="margin-top:15px;">
    <button onclick="generateBatchUrls()">生成链接</button>
    <button onclick="copyBatchResult()">复制结果</button>
    <button onclick="clearBatch()">清空本区</button>
</div>

<textarea id="batchOutput" placeholder="批量生成的链接会显示在这里，每行一个"></textarea>
</div>

<script>
// ── 原有功能 ──
function generateHTML() {
    const input = document.getElementById("inputUrls").value.trim();
    if (!input) {
        alert("请输入至少一个URL");
        return;
    }

    const urls = input.split("\n").map(u => u.trim()).filter(u => u !== "");
    const result = urls
        .map((url, index) => 
            `<div class="image-item"><div class="img-wrap"><img data-src="${url}" alt="${index + 1}"></div></div>`
        )
        .join("\n");

    document.getElementById("output").value = result;
}

// ── 新增批量生成链接功能 ──
function generateBatchUrls() {
    const prefix = document.getElementById("prefix").value.trim() || "zrsetu";
    const number = document.getElementById("number").value.trim() || "1";
    const baseName = document.getElementById("baseName").value.trim() || "pic";
    const suffix = document.getElementById("suffix").value.trim() || "webp";
    const count = parseInt(document.getElementById("count").value) || 80;

    if (count < 1 || count > 9999) {
        alert("数量请填写1~9999之间的数字");
        return;
    }

    const lines = [];
    for(let i = 1; i <= count; i++) {
        const filename = `${baseName}-${i}.${suffix}`;
        const url = `https://r2.setutime.com/${prefix}/${number}/${filename}`;
        lines.push(url);
    }

    document.getElementById("batchOutput").value = lines.join("\n");
}

function copyResult() {
    const output = document.getElementById("output");
    output.select();
    document.execCommand("copy");
    alert("代码已复制到剪贴板！");
}

function copyBatchResult() {
    const output = document.getElementById("batchOutput");
    output.select();
    document.execCommand("copy");
    alert("批量链接已复制到剪贴板！");
}

function clearAll() {
    document.getElementById("inputUrls").value = "";
    document.getElementById("output").value = "";
    alert("输入框和输出框已清空！");
}

function clearBatch() {
    document.getElementById("prefix").value = "zrsetu";
    document.getElementById("number").value = "3";
    document.getElementById("baseName").value = "pic";
    document.getElementById("suffix").value = "webp";
    document.getElementById("count").value = "80";
    document.getElementById("batchOutput").value = "";
    alert("批量生成区已重置！");
}
</script>
</body>
</html>
